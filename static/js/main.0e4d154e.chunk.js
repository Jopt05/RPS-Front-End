(this.webpackJsonprps=this.webpackJsonprps||[]).push([[0],{20:function(e,n,a){},27:function(e,n,a){},28:function(e,n,a){},29:function(e,n,a){},37:function(e,n,a){},38:function(e,n,a){"use strict";a.r(n);var t=a(1),r=a(21),s=a.n(r),c=(a(27),a(8)),o=(a(28),a(9)),i=a(2),j=(a(29),a(0)),l=function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"Game",children:Object(j.jsx)("header",{className:"Game__Header",children:Object(j.jsxs)("div",{className:"Game__Header-Container",children:[Object(j.jsx)("div",{className:"Game__Header-Container-TitleC",children:Object(j.jsxs)("p",{className:"Game__Header-Container-TitleC-Title",children:["Rock",Object(j.jsx)("br",{}),"Papper",Object(j.jsx)("br",{}),"Scissors"]})}),Object(j.jsxs)("nav",{className:"GameNav",children:[Object(j.jsx)(o.b,{activeClassName:"GameNav__Link-A",className:"GameNav__Link",to:"/game",children:"Play"}),Object(j.jsx)(o.b,{activeClassName:"GameNav__Link-A",className:"GameNav__Link",to:"/score",children:"Scoreboard"})]}),Object(j.jsx)("div",{className:"Game__Header-Container-ScoreC",children:Object(j.jsxs)("div",{className:"Game__Header-Container-ScoreCC",children:[Object(j.jsx)("span",{className:"Game__Header-Container-ScoreCC-Score",children:"SCORE"}),Object(j.jsx)("span",{className:"Game__Header-Container-ScoreCC-ScoreP",children:"0"})]})})]})})})})},u=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(l,{}),Object(j.jsx)("div",{className:"RPSContainer"})]})},d=a(12),b=a(10),m=a.n(b),O=a(3),h=a(13),p=(a(20),function(e){var n=e.history,a=Object(t.useContext)(N),r=a.UserInfo,s=a.setUserInfo,i=Object(t.useState)({}),l=Object(c.a)(i,2),u=l[0],b=l[1],p=Object(t.useState)({msg:"",hasError:!1}),x=Object(c.a)(p,2),_=x[0],f=x[1],v=function(){var e=Object(h.a)(m.a.mark((function e(a){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),u.User&&u.Password){e.next=4;break}return s(Object(O.a)(Object(O.a)({},r),{},{msg:"You cannot leave fields empty"})),e.abrupt("return");case 4:return e.next=6,fetch("https://rpsbackendjopt.herokuapp.com/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:u.User,password:u.Password})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}));case 6:if(!(t=e.sent).msg){e.next=10;break}return f(Object(O.a)(Object(O.a)({},_),{},{msg:t.msg,hasError:!0})),e.abrupt("return");case 10:f(Object(O.a)(Object(O.a)({},_),{},{msg:"",hasError:!1})),s(Object(O.a)(Object(O.a)({},r),{},{tokenId:null===t||void 0===t?void 0:t.tokenId,user:null===t||void 0===t?void 0:t.usuario})),n.replace("/game");case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),C=function(e){b(Object(O.a)(Object(O.a)({},u),{},Object(d.a)({},e.target.name,e.target.value)))};return Object(t.useEffect)((function(){document.getElementsByName("User")[0].focus()}),[]),Object(j.jsx)("div",{className:"MainBody",children:Object(j.jsx)("div",{className:"MainBody__Container",children:Object(j.jsxs)("form",{onSubmit:v,className:"MainBody__Container-Form",children:[Object(j.jsx)("p",{className:"MainBody__Container-Form-Title",children:"Login"}),Object(j.jsx)("label",{className:"MainBody__Container-Form-Label",children:"User:"}),Object(j.jsx)("input",{name:"User",className:"MainBody__Container-Form-Input",onChange:C}),Object(j.jsx)("label",{className:"MainBody__Container-Form-Label",children:"Password:"}),Object(j.jsx)("input",{name:"Password",type:"password",className:"MainBody__Container-Form-Input",onChange:C}),Object(j.jsx)("p",{className:"MainBody__Container-Form-Message".concat(_.hasError?"-Error":""),children:null===_||void 0===_?void 0:_.msg}),Object(j.jsx)("button",{className:"MainBody__Container-Form-Button",children:"Login"}),Object(j.jsx)("nav",{className:"MainBody__LinksDiv",children:Object(j.jsx)(o.b,{exact:!0,className:"MainBody__LinksDiv-Link",to:"/register",children:"You don't have an account? Register here!"})})]})})})}),x=function(e){var n=e.history,a=Object(t.useState)({}),r=Object(c.a)(a,2),s=r[0],i=r[1],l=Object(t.useState)({msg:"",id:"",hasError:!1}),u=Object(c.a)(l,2),b=u[0],p=u[1],x=function(e){i(Object(O.a)(Object(O.a)({},s),{},Object(d.a)({},e.target.name,e.target.value)))},_=function(){var e=Object(h.a)(m.a.mark((function e(a){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),s.User&&s.Password){e.next=4;break}return p(Object(O.a)(Object(O.a)({},b),{},{msg:"You cannot leave fields empty"})),e.abrupt("return");case 4:return e.next=6,fetch("https://rpsbackendjopt.herokuapp.com/api/usuarios",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:s.User,password:s.Password,score:0})}).then((function(e){return e.json()}));case 6:if(!(t=e.sent).errors){e.next=10;break}return p(Object(O.a)(Object(O.a)({},b),{},{msg:t.errors[0].msg})),e.abrupt("return");case 10:setTimeout((function(){n.goBack()}),1e3);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"MainBody",children:Object(j.jsx)("div",{className:"MainBody__Container",children:Object(j.jsxs)("form",{onSubmit:_,className:"MainBody__Container-Form",children:[Object(j.jsx)("p",{className:"MainBody__Container-Form-Title",children:"Register"}),Object(j.jsx)("label",{className:"MainBody__Container-Form-Label",children:"User:"}),Object(j.jsx)("input",{name:"User",className:"MainBody__Container-Form-Input",onChange:x}),Object(j.jsx)("label",{className:"MainBody__Container-Form-Label",children:"Password:"}),Object(j.jsx)("input",{type:"password",name:"Password",className:"MainBody__Container-Form-Input",onChange:x}),Object(j.jsx)("p",{className:"MainBody__Container-Form-Message".concat(b.hasError?"-Error":""),children:b.msg}),Object(j.jsx)("button",{className:"MainBody__Container-Form-Button",children:"Register"}),Object(j.jsx)("nav",{className:"MainBody__LinksDiv",children:Object(j.jsx)(o.b,{exact:!0,className:"MainBody__LinksDiv-Link",to:"/login",children:"You have an account? Login here!"})})]})})})},_=function(){var e=Object(t.useState)(null),n=Object(c.a)(e,2),a=n[0],r=n[1];return Object(t.useEffect)((function(){(function(){var e=Object(h.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://rpsbackendjopt.herokuapp.com/api/usuarios",{method:"GET"}).then((function(e){return e.json()})).then((function(e){return e.usuarios}));case 2:for((n=e.sent).sort((function(e,n){return n.score-e.score}));n.length>5;)n.pop();r(Object(O.a)(Object(O.a)({},a),{},{users:n}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(j.jsx)("div",{className:"Container",children:Object(j.jsxs)("div",{className:"Container__Div",children:[Object(j.jsxs)("div",{className:"Container__Row",children:[Object(j.jsx)("p",{className:"Username",children:"NICKNAME"}),Object(j.jsx)("p",{className:"Score",children:"SCORE"})]}),null===a||void 0===a?void 0:a.users.map((function(e){return Object(j.jsxs)("div",{className:"Container__Row",children:[Object(j.jsx)("p",{className:"Username",children:e.user}),Object(j.jsx)("p",{className:"Score",children:e.score})]})}))]})})},f=(a(37),function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(l,{}),Object(j.jsx)(_,{})]})}),v=function(){return Object(j.jsx)(o.a,{children:Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)(i.d,{children:[Object(j.jsx)(i.b,{exact:!0,path:"/login",component:p}),Object(j.jsx)(i.b,{exact:!0,path:"/register",component:x}),Object(j.jsx)(i.b,{exact:!0,path:"/game",component:u}),Object(j.jsx)(i.b,{exact:!0,path:"/score",component:f}),Object(j.jsx)(i.a,{to:"/login"})]})})})},N=Object(t.createContext)(null);var C=function(){var e=Object(t.useState)({tokenId:"",user:{}}),n=Object(c.a)(e,2),a=n[0],r=n[1];return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(N.Provider,{value:{UserInfo:a,setUserInfo:r},children:Object(j.jsx)(v,{})})})};s.a.render(Object(j.jsx)(C,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.0e4d154e.chunk.js.map