(this.webpackJsonprps=this.webpackJsonprps||[]).push([[0],{20:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},37:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a(21),c=a.n(s),r=(a(28),a(5)),i=(a(29),a(9)),o=a(3),j=a(2),l=(a(30),a(0)),d=function(){var e,t=Object(n.useContext)(w),a=t.UserInfo;t.setUserInfo;return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("div",{className:"Game",children:Object(l.jsx)("header",{className:"Game__Header",children:Object(l.jsxs)("div",{className:"Game__Header-Container",children:[Object(l.jsx)("div",{className:"Game__Header-Container-TitleC",children:Object(l.jsxs)("p",{className:"Game__Header-Container-TitleC-Title",children:["Rock",Object(l.jsx)("br",{}),"Papper",Object(l.jsx)("br",{}),"Scissors"]})}),Object(l.jsxs)("nav",{className:"GameNav",children:[Object(l.jsx)(i.b,{activeClassName:"GameNav__Link-A",className:"GameNav__Link",to:"/game",children:"Play"}),Object(l.jsx)(i.b,{activeClassName:"GameNav__Link-A",className:"GameNav__Link",to:"/score",children:"Scoreboard"})]}),Object(l.jsx)("div",{className:"Game__Header-Container-ScoreC",children:Object(l.jsxs)("div",{className:"Game__Header-Container-ScoreCC",children:[Object(l.jsx)("span",{className:"Game__Header-Container-ScoreCC-Score",children:"SCORE"}),Object(l.jsx)("span",{className:"Game__Header-Container-ScoreCC-ScoreP",children:null===a||void 0===a||null===(e=a.user)||void 0===e?void 0:e.score})]})})]})})})})},m=(a(37),a.p+"static/media/bg-triangle.c0c30b56.svg"),b=a.p+"static/media/icon-rock.476e90a9.svg",u=a.p+"static/media/icon-paper.8b57a6b1.svg",O=a.p+"static/media/icon-scissors.3b1a5d7e.svg",h=function(e){switch(e){case"Rock":return 0;case"Paper":return 1;case"Scissors":return 2;case 0:return"Rock";case 1:return"Paper";case 2:return"Scissors"}},p=function(e){e.history;var t=Object(n.useContext)(w),a=t.UserInfo,s=t.setUserInfo,c=a.user,i=c.score,o=Object(n.useState)(!1),p=Object(r.a)(o,2),x=p[0],v=p[1],N=Object(n.useState)(!1),g=Object(r.a)(N,2),f=g[0],_=g[1],C=Object(n.useState)({userElection:null,aiElection:null}),I=Object(r.a)(C,2),S=I[0],y=I[1],k=Object(n.useState)(""),B=Object(r.a)(k,2),M=B[0],E=B[1],L=Object(n.useState)({userItem:null,aiItem:null}),U=Object(r.a)(L,2),P=U[0],F=U[1],G=[b,u,O],T=function(e){v(!0);for(var t,a,n,s=e.target;"IMG"!=s.tagName;)s=s.children[0];s=s.getAttribute("name"),t=Math.floor(3*Math.random())+0,t=h(t),y(Object(j.a)(Object(j.a)({},S),{},{aiElection:t,userElection:s})),s=h(s),t=h(t),F(Object(j.a)(Object(j.a)({},P),{},{userItem:G[s],aiItem:G[t]})),E((a=s)===(n=t)?"SAME":0===a&&2===n||2===a&&1===n||1===a&&0===n?"YOU WIN":"YOU LOSE"),setTimeout((function(){_(!0)}),500)};return Object(n.useEffect)((function(){"YOU WIN"==M&&(fetch("https://rpsbackend-production.up.railway.app/api/usuarios/".concat(c.uid),{method:"PUT",headers:{"Content-Type":"application/json","x-token":null===a||void 0===a?void 0:a.tokenId},body:JSON.stringify({score:a.user.score+1})}).then((function(e){return e.json()})).catch((function(e){return console.log("Error en la peticion")})),setTimeout((function(){s(Object(j.a)(Object(j.a)({},a),{},{user:Object(j.a)(Object(j.a)({},c),{},{score:i+1})}))}),1500))}),[M]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(d,{}),Object(l.jsxs)("div",{className:"RPSContainer ".concat(x?"Full":""),children:[Object(l.jsx)("img",{className:"RPSContainer__Bg ".concat(x?"Hide":""),src:m}),Object(l.jsx)("div",{className:"ItemContainer Rock ".concat(x?"Hide":""),onClick:T,children:Object(l.jsx)("div",{className:"ItemBorder",children:Object(l.jsx)("div",{className:"ItemInnerShadow",children:Object(l.jsx)("div",{className:"ItemInnerContainer",children:Object(l.jsx)("img",{name:"Rock",className:"Item-Svg",src:b})})})})}),Object(l.jsx)("div",{className:"ItemContainer Paper ".concat(x?"Hide":""),onClick:T,children:Object(l.jsx)("div",{className:"ItemBorder",children:Object(l.jsx)("div",{className:"ItemInnerShadow",children:Object(l.jsx)("div",{className:"ItemInnerContainer",children:Object(l.jsx)("img",{name:"Paper",className:"Item-Svg",src:u})})})})}),Object(l.jsx)("div",{className:"ItemContainer Scissors ".concat(x?"Hide":""),onClick:T,children:Object(l.jsx)("div",{className:"ItemBorder",children:Object(l.jsx)("div",{className:"ItemInnerShadow",children:Object(l.jsx)("div",{className:"ItemInnerContainer",children:Object(l.jsx)("img",{name:"Scissors",className:"Item-Svg",src:O})})})})}),Object(l.jsxs)("div",{className:"GameContainer ".concat(x?"":"Hide"),children:[Object(l.jsxs)("div",{className:"Option",children:[Object(l.jsx)("p",{className:"OptionTitle",children:"YOU PICKED"}),Object(l.jsx)("div",{className:"ItemContainerG ".concat(S.userElection),children:Object(l.jsx)("div",{className:"ItemBorder",children:Object(l.jsx)("div",{className:"ItemInnerShadow",children:Object(l.jsx)("div",{className:"ItemInnerContainer",children:Object(l.jsx)("img",{className:"Item-Svg",src:P.userItem})})})})})]}),Object(l.jsx)("div",{className:"Option ".concat(f?"":"NoShow"),children:Object(l.jsxs)("div",{className:"Versus",children:[Object(l.jsx)("p",{className:"OptionTitle",children:M}),"YOU WIN"!=M&&Object(l.jsx)("button",{className:"ButtonAgain",onClick:function(){v(!1),_(!1)},children:"PLAY AGAIN"})]})}),Object(l.jsxs)("div",{className:"Option",children:[Object(l.jsx)("p",{className:"OptionTitle",children:"THE HOUSE PICKED"}),Object(l.jsx)("div",{className:"ItemContainerG ".concat(S.aiElection),children:Object(l.jsx)("div",{className:"ItemBorder",children:Object(l.jsx)("div",{className:"ItemInnerShadow",children:Object(l.jsx)("div",{className:"ItemInnerContainer",children:Object(l.jsx)("img",{className:"Item-Svg",src:P.aiItem})})})})})]})]})]})]})},x=a(12),v=a(10),N=a.n(v),g=a(13),f=(a(20),a.p+"static/media/Loading.0fcc14e1.svg"),_=function(e){var t=e.history,a=Object(n.useContext)(w),s=a.UserInfo,c=a.setUserInfo,o=Object(n.useState)({}),d=Object(r.a)(o,2),m=d[0],b=d[1],u=Object(n.useState)({msg:"",hasError:!1}),O=Object(r.a)(u,2),h=O[0],p=O[1],v=Object(n.useState)(!1),_=Object(r.a)(v,2),C=_[0],I=_[1],S=function(){var e=Object(g.a)(N.a.mark((function e(a){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),I(!0),m.User&&m.Password){e.next=5;break}return c(Object(j.a)(Object(j.a)({},s),{},{msg:"You cannot leave fields empty"})),e.abrupt("return");case 5:return e.next=7,fetch("https://rpsbackend-production.up.railway.app/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:m.User,password:m.Password})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}));case 7:if(!(n=e.sent).msg){e.next=12;break}return p(Object(j.a)(Object(j.a)({},h),{},{msg:n.msg,hasError:!0})),I(!1),e.abrupt("return");case 12:p(Object(j.a)(Object(j.a)({},h),{},{msg:"",hasError:!1})),c(Object(j.a)(Object(j.a)({},s),{},{tokenId:null===n||void 0===n?void 0:n.tokenId,user:null===n||void 0===n?void 0:n.usuario,isLogged:!0})),I(!1),t.replace("/game");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){b(Object(j.a)(Object(j.a)({},m),{},Object(x.a)({},e.target.name,e.target.value)))};return Object(n.useEffect)((function(){document.getElementsByName("User")[0].focus()}),[]),Object(l.jsx)("div",{className:"MainBody",children:Object(l.jsx)("div",{className:"MainBody__Container",children:Object(l.jsxs)("form",{onSubmit:S,className:"MainBody__Container-Form",children:[Object(l.jsx)("p",{className:"MainBody__Container-Form-Title",children:"Login"}),Object(l.jsx)("label",{className:"MainBody__Container-Form-Label",children:"User:"}),Object(l.jsx)("input",{name:"User",className:"MainBody__Container-Form-Input",onChange:y}),Object(l.jsx)("label",{className:"MainBody__Container-Form-Label",children:"Password:"}),Object(l.jsx)("input",{name:"Password",type:"password",className:"MainBody__Container-Form-Input",onChange:y}),Object(l.jsx)("p",{className:"MainBody__Container-Form-Message".concat(h.hasError?"-Error":""),children:null===h||void 0===h?void 0:h.msg}),Object(l.jsx)("button",{className:"MainBody__Container-Form-Button",children:C?Object(l.jsx)("img",{className:"LoadingSvg",src:f,alt:"Loading"}):"Login"}),Object(l.jsx)("nav",{className:"MainBody__LinksDiv",children:Object(l.jsx)(i.b,{exact:!0,className:"MainBody__LinksDiv-Link",to:"/register",children:"You don't have an account? Register here!"})})]})})})},C=function(e){var t=e.history,a=Object(n.useState)({}),s=Object(r.a)(a,2),c=s[0],o=s[1],d=Object(n.useState)({msg:"",id:"",hasError:!1}),m=Object(r.a)(d,2),b=m[0],u=m[1],O=Object(n.useState)(!1),h=Object(r.a)(O,2),p=h[0],v=h[1],_=function(e){o(Object(j.a)(Object(j.a)({},c),{},Object(x.a)({},e.target.name,e.target.value)))},C=function(){var e=Object(g.a)(N.a.mark((function e(a){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),v(!0),c.User&&c.Password){e.next=5;break}return u(Object(j.a)(Object(j.a)({},b),{},{msg:"You cannot leave fields empty"})),e.abrupt("return");case 5:return e.next=7,fetch("https://rpsbackend-production.up.railway.app/api/usuarios",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:c.User,password:c.Password,score:0})}).then((function(e){return e.json()}));case 7:if(!(n=e.sent).errors){e.next=11;break}return u(Object(j.a)(Object(j.a)({},b),{},{msg:n.errors[0].msg})),e.abrupt("return");case 11:u(Object(j.a)(Object(j.a)({},b),{},{msg:null===n||void 0===n?void 0:n.msg})),setTimeout((function(){v(!1),t.goBack()}),1e3);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsx)("div",{className:"MainBody",children:Object(l.jsx)("div",{className:"MainBody__Container",children:Object(l.jsxs)("form",{onSubmit:C,className:"MainBody__Container-Form",children:[Object(l.jsx)("p",{className:"MainBody__Container-Form-Title",children:"Register"}),Object(l.jsx)("label",{className:"MainBody__Container-Form-Label",children:"User:"}),Object(l.jsx)("input",{name:"User",className:"MainBody__Container-Form-Input",onChange:_}),Object(l.jsx)("label",{className:"MainBody__Container-Form-Label",children:"Password:"}),Object(l.jsx)("input",{type:"password",name:"Password",className:"MainBody__Container-Form-Input",onChange:_}),Object(l.jsx)("p",{className:"MainBody__Container-Form-Message".concat(b.hasError?"-Error":""),children:b.msg}),Object(l.jsx)("button",{className:"MainBody__Container-Form-Button",children:p?Object(l.jsx)("img",{className:"LoadingSvg",src:f,alt:"Loading"}):"Register"}),Object(l.jsx)("nav",{className:"MainBody__LinksDiv",children:Object(l.jsx)(i.b,{exact:!0,className:"MainBody__LinksDiv-Link",to:"/login",children:"You have an account? Login here!"})})]})})})},I=function(){var e=Object(n.useState)(null),t=Object(r.a)(e,2),a=t[0],s=t[1];return Object(n.useEffect)((function(){(function(){var e=Object(g.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://rpsbackendjopt.herokuapp.com/api/usuarios",{method:"GET"}).then((function(e){return e.json()})).then((function(e){return e.usuarios}));case 2:for((t=e.sent).sort((function(e,t){return t.score-e.score}));t.length>5;)t.pop();s(Object(j.a)(Object(j.a)({},a),{},{users:t}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(l.jsx)("div",{className:"Container",children:Object(l.jsxs)("div",{className:"Container__Div",children:[Object(l.jsxs)("div",{className:"Container__Row",children:[Object(l.jsx)("p",{className:"Username",children:"NICKNAME"}),Object(l.jsx)("p",{className:"Score",children:"SCORE"})]}),null===a||void 0===a?void 0:a.users.map((function(e){return Object(l.jsxs)("div",{className:"Container__Row",children:[Object(l.jsx)("p",{className:"Username",children:e.user}),Object(l.jsx)("p",{className:"Score",children:e.score})]})}))]})})},S=(a(39),function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(d,{}),Object(l.jsx)(I,{})]})}),y=a(23),k=function(e){var t=e.isAuthenticated,a=e.component,n=Object(y.a)(e,["isAuthenticated","component"]);return Object(l.jsx)(o.b,Object(j.a)(Object(j.a)({},n),{},{component:function(e){return t?Object(l.jsx)(a,Object(j.a)({},e)):Object(l.jsx)(o.a,{to:"/"})}}))},B=function(){var e=Object(n.useContext)(w),t=e.UserInfo;e.setUserInfo;return Object(l.jsx)(i.a,{children:Object(l.jsx)("div",{className:"App",children:Object(l.jsxs)(o.d,{children:[Object(l.jsx)(o.b,{exact:!0,path:"/login",component:_}),Object(l.jsx)(o.b,{exact:!0,path:"/register",component:C}),Object(l.jsx)(k,{isAuthenticated:t.isLogged,exact:!0,path:"/game",component:p}),Object(l.jsx)(k,{isAuthenticated:t.isLogged,exact:!0,path:"/score",component:S}),Object(l.jsx)(o.a,{to:"/login"})]})})})},w=Object(n.createContext)(null);var M=function(){var e=Object(n.useState)({tokenId:"",user:{},isLogged:!1}),t=Object(r.a)(e,2),a=t[0],s=t[1];return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(w.Provider,{value:{UserInfo:a,setUserInfo:s},children:Object(l.jsx)(B,{})})})};c.a.render(Object(l.jsx)(M,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.ce350c62.chunk.js.map